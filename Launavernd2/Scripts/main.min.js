/*! launavernd 05-08-2015 */
function onHusnaediChanged(a){var b="";"Leigu"==a.value?(b="Hver er leigukostnaður þinn á mánuði",$("#husnaedislan-grp").hide(),$("#husnaedislan").dxSlider("instance").option("value",1e6)):b="Hver er lánakostnaður þinn á mánuði",$("#husnaedi-kostnadur-grp").hide(),$("#husnaedi-kostnadur-display").text(b),$("#husnaedi-kostnadur").dxSlider("instance").option("value",0),$("#husnaedi-kostnadur-grp").fadeIn("fast")}function initEditables(){$("#endurstillaGildi").click(function(){Framfaersla.Hjon=JSON.parse(JSON.stringify(FramfaerslaOriginal.Hjon)),Framfaersla.Einstaklingur=JSON.parse(JSON.stringify(FramfaerslaOriginal.Einstaklingur)),initEditables()}),$(".editable").each(function(a){$(this).editable("destroy")}),$("#xaldur").editable({type:"text",value:Persona.aldur,success:function(a,b){Persona.aldur=Number(b),initEditables()}}),$("#xborn").editable({type:"text",value:Persona.fjoldiBarna,success:function(a,b){Persona.fjoldiBarna=Number(b),initEditables()}}),$("#xlaun").editable({type:"text",value:Persona.laun,success:function(a,b){Persona.laun=Number(b),initEditables()}}),$("#xmakalaun").editable({type:"text",value:Persona.makaLaun,success:function(a,b){Persona.makaLaun=Number(b),initEditables()}}),$("#xmatur").editable({type:"text",value:Persona.kostnadur()[0],success:function(a,b){breytaFramfaersluGildi(0,Number(b)),initEditables()}}),$("#xfot").editable({type:"text",value:saekjaFramfaersluGildi(1),success:function(a,b){breytaFramfaersluGildi(1,Number(b)),initEditables()}}),$("#xlaeknis").editable({type:"text",value:saekjaFramfaersluGildi(2),success:function(a,b){breytaFramfaersluGildi(2,Number(b)),initEditables()}}),$("#xtomstundir").editable({type:"text",value:saekjaFramfaersluGildi(3),success:function(a,b){breytaFramfaersluGildi(3,Number(b)),initEditables()}}),$("#xsamskipti").editable({type:"text",value:saekjaFramfaersluGildi(4),success:function(a,b){breytaFramfaersluGildi(4,Number(b)),initEditables()}}),$("#xþjonusta").editable({type:"text",value:saekjaFramfaersluGildi(5),success:function(a,b){breytaFramfaersluGildi(5,Number(b)),initEditables()}}),$("#xsamgongur").editable({type:"text",value:saekjaFramfaersluGildi(6),success:function(a,b){breytaFramfaersluGildi(6,Number(b)),initEditables()}})}function breytaFramfaersluGildi(a,b){var c=Math.min(5,Persona.fjoldiBarna);if(2==Persona.maki){var d=Framfaersla.Einstaklingur[c][a],e=b-d;Framfaersla.Einstaklingur[c][a]=b,Framfaersla.Einstaklingur[c][7]+=e}else{var d=Framfaersla.Hjon[c][a],e=b-d;Framfaersla.Hjon[c][a]=b,Framfaersla.Hjon[c][7]+=e}}function saekjaFramfaersluGildi(a){var b=Math.min(5,Persona.fjoldiBarna),c=0;return c=2==Persona.maki?Framfaersla.Einstaklingur[b][a]:Framfaersla.Hjon[b][a]}function initInfo1(){var a=["born"];a.forEach(createPopover)}function initInfo2(){var a=["skammtimaskuldir","laun"];a.forEach(createPopover)}function initInfo3(){var a=["forsendur"];a.forEach(createPopover),a=["framfaersla"],a.forEach(createPopover2)}function createPopover(a,b,c){var d="#"+a+"InfoWindow",e="#"+a+"Info",f=$(d).dxPopover({target:e,width:"300",animation:{show:{type:"pop",from:{scale:0},to:{scale:1}},hide:{type:"pop",from:{scale:1},to:{scale:0}}},visible:!1}).dxPopover("instance");$(e).unbind().hover(function(){f.show()},function(){f.hide()})}function createPopover2(a,b,c){var d="#"+a+"InfoWindow",e="#"+a+"Info",f=$(d).dxPopover({target:e,position:"top",width:300,shading:!0,shadingColor:"rgba(0, 0, 0, 0.5)"}).dxPopover("instance");$(e).unbind().hover(function(){f.show()},null).click(function(){f.hide()})}function fmtAldur(a){return 70>a?a+" ára":a+" ára eða eldri"}function fmtBornLabel(a){return 0==a?"Engin":10>a?a:a+"+"}function fmtBornTooltip(a){return 0==a?"Engin börn":10>a?a+" börn":a+" eða fleiri börn"}function fmtLaunLabel(a){return 1e6>a?"Engin laun":"1 milljón"}function fmtKronur(a){return 0==a?"Enga":kronur(a)}function fmtLaunTooltip(a){return 0==a?"Engin laun":1e6>a?numberWithDots(a)+" kr.":numberWithDots(a)+" kr. eða hærri"}function fmtSkammtimaskuldirLabel(a){return 0==a?"Ekkert":1e7>a?"~"+numberWithDots(a)+" kr.":"10 milljónir"}function fmtSkammtimaskuldirTooltip(a){return 0==a?"Engar skuldir":1e7>a?"~"+numberWithDots(a)+" kr.":numberWithDots(a)+" kr. eða hærri"}function fmtProsentLabel(a){return a+"%"}function fmtProsentTooltip(a){return a+"%"}function fmtArLabel(a){return a+" ár"}function fmtArTooltip(a){return a+" ár"}function stillaTabPanel(a){a.docHeight=document.documentElement.clientHeight-1,a.tabPanelItems=[{icon:"info-circle",iconSize:"20px",iconColor:"grey",title:"Forsíða",template:"tab0"},{icon:"user",iconSize:"20px",iconColor:"grey",title:"Persónuupplýsingar",template:"tab1",model:Persona,valkostir:Valkostir,formatAldur:fmtAldur,formatBornLabel:fmtBornLabel,formatBornTooltip:fmtBornTooltip,aBarn:function(){return Persona.fjoldiBarna>0},hefurMaka:function(){return 1==Persona.maki},range:function(a){return new Array(Math.min(a,5))}},{icon:"money",iconSize:"20px",iconColor:"grey",title:"Lán/útgjöld",template:"tab2",model:Persona,valkostir:Valkostir,currentHusnaedi:1,currentHusnaediskostnadur:0,currentLan:0,formatLaunLabel:fmtLaunLabel,formatLaunTooltip:fmtLaunTooltip,formatSkammtimaskuldirLabel:fmtSkammtimaskuldirLabel,formatSkammtimaskuldirTooltip:fmtSkammtimaskuldirTooltip,erLeiga:function(){return 1==Persona.husnaedi},hefurMaka:function(){return 1==Persona.maki},radstofunNeikvaed:function(){return Persona.tilRadstofunar()<0}},{icon:"calculator",iconSize:"18px",iconColor:"grey",title:"Útreikningur",template:"tab3",model:Persona,formatProsentLabel:fmtProsentLabel,formatProsentTooltip:fmtProsentTooltip,formatKronur:fmtKronur,formatArLabel:fmtArLabel,formatArTooltip:fmtArTooltip,hefurMaka:function(){return 1==Persona.maki},round:function(a){return Math.round(a)}}]}function initUtreikningur(a){a.append($("#fourthTab").html()),$("#laun-prosenta").dxSlider({min:10,max:100,step:5,value:10,width:300,hint:"Dragðu stikuna á prósentuna.",tooltip:{enabled:!0,format:function(a){return a+"%"}},label:{visible:!0,position:"bottom",format:function(a){return a+"%"}}}),$("#laun-ar").dxSlider({min:1,max:10,step:1,value:1,width:300,hint:"Dragðu stikuna á árafjöldann.",tooltip:{enabled:!0,format:function(a){return a+" ár"}},label:{visible:!0,position:"bottom",format:function(a){return a+" ár"}}}),$("#idgjald").dxButton({text:"Reikna líftryggingu",onClick:function(){var a=$("#aldur").dxSlider("option","value"),b="Já"==$("#reykir").dxRadioGroup("option","value")?!0:!1,c=("Já"==$("#maki").dxRadioGroup("option","value")?!0:!1,$("#fjoldi-barna-heima").dxSlider("option","value"),$("#laun").dxSlider("option","value")),d=($("#husnaedi-kostnadur").dxSlider("option","value"),$("#laun-prosenta").dxSlider("option","value")),e=$("#laun-ar").dxSlider("option","value"),f=c*(d/100)*12*e;$("#liftrygging-amt-display").text(numberWithDots(Math.floor(f))+" kr."),$.get("/Data/GetIdgjald",{aldur:a,reykir:b}).success(function(a){if(!a)return void DevExpress.ui.notify("Vila kom upp!","danger",2e3);var b=a,c=f/1e6*b,d=c/12;$("#idgjald-amt-display").text(numberWithDots(Math.floor(d))+" kr. á mánuði.")})}})}function nextButton(a,b,c){a.append($("<br>"));var d="next-button-"+b;a.append($("<div id='"+d+"'></div>"));var e="#"+d;$(e).dxButton({text:c,onClick:function(){var a=$("#tab").dxTabPanel("option","selectedIndex"),b=(a+1)%5;$("#tab").dxTabPanel("instance").option("selectedIndex",b)}});var f=$(document).width(),g=$(e).width(),h=f/2-g/2-30;$(e).css("margin-left",h)}function getTabPanelObject(a){return{dataSource:dataItems,swipeEnabled:!0,loop:!0,animationEnabled:!0,height:document.documentElement.clientHeight-1,itemTemplate:function(b,c,d){switch(c){case 0:initForsida(d),nextButton(d,c,"Hefja greiningu");break;case 1:a.initPersonuuppl(d),nextButton(d,c,"Næsta skref");break;case 2:initBorn(d),nextButton(d,c,"Næsta skref");break;case 3:initPeningar(d),nextButton(d,c,"Næsta skref");break;case 4:initUtreikningur(d)}}}}function getTitle(a,b){return'<table><tr><td><i class="fa fa-'+a+' lv-icon"></i></td><td style="padding-left:8px;">&nbsp;'+b+"</td></tr></table>"}function numberWithDots(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function kronur(a){return numberWithDots(a)+" kr."}var Framfaersla={Einstaklingur:[[44364,8278,9655,12509,11833,4312,45080,136031],[69187,13402,11742,23291,14272,7185,45080,184159],[89723,18526,13830,32631,16710,10059,52080,233559],[105970,23650,15917,40529,19149,12933,59080,277227],[117928,28775,18005,40529,21586,15806,66080,308708],[117928,33899,20092,40529,24024,18680,78659,333812]],Hjon:[[81988,10967,14406,22366,17259,8575,45080,200642],[106812,16092,16493,33148,19698,11449,52080,255773],[127348,21216,18581,42488,22136,14322,59080,305172],[143594,26340,20668,50386,24575,17196,66080,348840],[155552,31464,22756,50386,27012,20070,78659,385901],[155552,36590,24843,50386,29450,22943,85659,405424]]},FramfaerslaOriginal={Einstaklingur:[[44364,8278,9655,12509,11833,4312,45080,136031],[69187,13402,11742,23291,14272,7185,45080,184159],[89723,18526,13830,32631,16710,10059,52080,233559],[105970,23650,15917,40529,19149,12933,59080,277227],[117928,28775,18005,40529,21586,15806,66080,308708],[117928,33899,20092,40529,24024,18680,78659,333812]],Hjon:[[81988,10967,14406,22366,17259,8575,45080,200642],[106812,16092,16493,33148,19698,11449,52080,255773],[127348,21216,18581,42488,22136,14322,59080,305172],[143594,26340,20668,50386,24575,17196,66080,348840],[155552,31464,22756,50386,27012,20070,78659,385901],[155552,36590,24843,50386,29450,22943,85659,405424]]},Liftrygging={Reyklaus:[1226,1235,1242,1249,1257,1268,1279,1293,1309,1326,1346,1369,1391,1415,1442,1472,1507,1548,1592,1643,1699,1763,1841,1928,2025,2133,2254,2397,2557,2738,2939,3166,3427,3720,4050,4421,4839,5340,5905,6546,7272,8093,9007,10041,11211,12535,14033,15701,17586,19716,22125],Reykir:[1327,1337,1362,1389,1417,1448,1481,1517,1557,1600,1647,1698,1769,1848,1934,2030,2136,2241,2357,2486,2630,2791,2947,3123,3320,3542,3792,4059,4359,4694,5070,5492,5936,6432,6987,7606,8296,9047,9884,10817,11855,13013,14301,15738,17336,19119,21103,23217,25558,28153,31028]},Sjukdomatrygging={Reyklaus:[1133,1184,1242,1300,1365,1437,1517,1602,1693,1792,1909,2042,2193,2363,2553,2763,2998,3255,3540,3867,4233,4636,5082,5571,6145,6821,7573,8382,9224,10113,11075,12226,13452,14736,16129,17640,19317,21084,22957,25236,28121,30554,33201,36080,39213,42621,46330,50364,54753,59528,64723],Reykir:[1221,1283,1348,1411,1483,1565,1655,1753,1858,1974,2111,2314,2555,2825,3146,3507,3844,4188,4543,5008,5560,6209,7010,7890,8925,10513,12378,14453,16282,18020,19595,20973,22407,23928,25584,27745,30185,33500,36698,39790,43500,46983,50465,54352,58535,63036,67879,73090,78694,84722,91204]};TAB_PERSONUUPPL=1,TAB_FJARMALAUPPL=2,TAB_UTREIKNINGUR=3;var lvApp=angular.module("lvApp",["dx","ngMaterial"]);lvApp.controller("defaultCtrl",["$scope",function(a){a.data={group1:"Banana",group2:"2",group3:"avatar-1"},a.radioData=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:"3",isDisabled:!0},{label:"4",value:"4"}],stillaTabPanel(a),a.tabChanged=function(b){var c=b.component.option("selectedIndex"),d=a.tabPanelItems[c].icon;$(".fa-"+d).css({color:"green"}),c==TAB_UTREIKNINGUR&&(initEditables(),initInfo3()),c==TAB_PERSONUUPPL&&initInfo1(),c==TAB_FJARMALAUPPL&&initInfo2()},a.naestaSida=function(){var a=$("#tabPanel").dxTabPanel("option","selectedIndex"),b=(a+1)%5;$("#tabPanel").dxTabPanel("instance").option("selectedIndex",b)},a.sendaUmsokn=function(){var a={};a.aldur=Persona.aldur,a.kyn=1==Persona.kyn?"karl":"kona",a.maki=1==Persona.maki?!0:!1,a.reykir=1==Persona.reykir?!0:!1,a.borgaManadarlega=Persona.borgaManadarlega,a.vernd=Persona.vernd,a.verndAr=Persona.verndAr,a.sjukdomaVernd=Persona.sjukdomaVernd,a.sjukdomaVerndAr=Persona.sjukdomaVerndAr,a.adrarTryggingar=Persona.adrarTryggingar,a.onnurLiftrygging=Persona.onnurLiftrygging,a.onnurSjukdomaTrygging=Persona.onnurSjukdomaTrygging,location.href=JSON.ser,console.log(a)},a.tabInit=function(a){window.tabPanel=$("#tabPanel").dxTabPanel("instance")},a.buttonSettings={text:"Add item",clickAction:function(b){a.tabPanelItems.push({title:"New item"})}}}]),lvApp.filter("kronur",function(){return function(a){return kronur(a)}}),lvApp.filter("aldur",function(){return function(a){return a+" ára"}}),lvApp.filter("jaNei",function(){return function(a){return 1==a?"Já":"Nei"}}),lvApp.filter("kyn",function(){return function(a){return 1==a?"Karl":"Kona"}}),lvApp.filter("kronurPerManud",function(){return function(a){return kronur(Math.round(a/12))}}),lvApp.filter("born",function(){return function(a){return 0==a?"Engin":1==a?"1 barn":a+" börn"}}),angular.element(document).ready(function(){angular.bootstrap(document,["lvApp"]),$.fn.editable.defaults.mode="popup"});var Persona={kyn:1,aldur:25,reykir:2,maki:2,fjoldiBarna:0,laun:15e4,makaLaun:15e4,skammtimaSkuldir:0,husnaedi:2,erLeiga:function(){return 1==this.husnaedi},husnaediTxt:function(){return this.erLeiga()?"Leiguhúsnæði":"Eigin húsnæði"},husnaedisLan:0,leiga:0,husnaediLabel:function(){return this.erLeiga()?"Leiga á mánuði":"Afborganir á mánuði"},husnaediUpphaed:function(){return this.erLeiga()?this.leiga:this.husnaedisLan},kostnadur:function(){var a=Math.min(5,this.fjoldiBarna);return 2==this.maki?Framfaersla.Einstaklingur[a]:Framfaersla.Hjon[a]},afborganir:function(){var a=this.skammtimaSkuldir;return a+=this.erLeiga()?this.leiga:this.husnaedisLan},heildarKostn:function(){var a=this.kostnadur()[7];return a+=this.afborganir()},tilRadstofunar:function(){var a=this.laun-this.heildarKostn();return 1==this.maki&&(a+=this.makaLaun),a},vernd:50,verndAr:2,sjukdomaVernd:80,sjukdomaVerndAr:2,adrarTryggingar:!1,onnurLiftrygging:0,onnurSjukdomaTrygging:0,liftrygging:function(){var a=this.laun*this.vernd/100;return a=a*this.verndAr*12},liftryggingTotal:function(){var a=this.liftrygging();return this.adrarTryggingar&&(a-=this.onnurLiftrygging),a},lifIdgjald:function(){var a=Liftrygging.Reyklaus[this.aldur-19];1==this.reykir&&(a=Liftrygging.Reykir[this.aldur-19]);var b=this.liftrygging();this.adrarTryggingar&&(b=this.liftryggingTotal());var c=b/1e6,d=Math.round(c*a);return d},sjukdomaTrygging:function(){var a=this.laun*this.sjukdomaVernd/100;return a=a*this.sjukdomaVerndAr*12},sjukdomaTryggingTotal:function(){var a=this.sjukdomaTrygging();return this.adrarTryggingar&&(a-=this.onnurSjukdomaTrygging),a},sjukdomaIdgjald:function(){var a=Sjukdomatrygging.Reyklaus[this.aldur-19];1==this.reykir&&(a=Sjukdomatrygging.Reykir[this.aldur-19]);var b=this.sjukdomaTrygging();this.adrarTryggingar&&(b=this.sjukdomaTryggingTotal());var c=b/1e6,d=Math.round(c*a);return d},idgjold:function(){var a=this.lifIdgjald()+this.sjukdomaIdgjald();return a},tryggingTexti:function(){return"Ég vil að fjölskylda mín haldi "+this.vernd+"% af núverandi launum mínum í "+this.verndAr+" ár ef ég fell frá."},sjukdomaTryggingTexti:function(){return"Ég vil halda "+this.sjukdomaVernd+"% af núverandi launum mínum í "+this.sjukdomaVerndAr+" ár ef ég greinist með illvígan sjúkdóm."},borgaManadarlega:!0,personImg:function(){var a="/Images/";a+=1==this.kyn?"man-":"woman-";var b=Math.round(this.aldur/15);return a+=b,a+=".png"},makiImg:function(){var a="/Images/";a+=1!=this.kyn?"man-":"woman-";var b=Math.round(this.aldur/15);return a+=b,a+=".png"},houseImg:function(){var a="/Images/",b=0;1==this.husnaedi?(a+="leigu-",b=this.leiga):(a+="eigin-",b=this.husnaedisLan),b=Math.min(2e5,b+1);var c=Math.ceil(b/4e4);return a+=c,a+=".png"},reykirImg:function(){var a="/Images/";return a+=1==this.reykir?"smoking.png":"empty.png"},startBabyImage:Math.floor(3*Math.random()+1),babyImg:function(a){var b="/Images/baby-";return b+((this.startBabyImage+a)%4+1)+".png"},peningaImg:function(){var a="/Images/money-",b=this.laun;return 1==this.maki&&(b+=this.makaLaun),b=Math.min(999999,b),a+(Math.floor(b/2e5)+1)+".png"}},Valkostir={kyn:[{text:"Karl",value:1},{text:"Kona",value:2}],jaNei:[{text:"Já",value:1},{text:"Nei",value:2}],husnaedi:[{text:"Leigi",value:1},{text:"Eigin húsnæði",value:2}]};